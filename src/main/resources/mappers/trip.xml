<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.enjoytrip.domain.trip.mapper.TripMapper">
	
	<resultMap id = "tripDescriptionResultMap" type = "tripDescriptionDto">
		<result column="desc_id" property="descId"/>
        <result column="overview" property="overview"/>
	</resultMap>
	
	<select id = "searchTrip" parameterType = "tripSearchCondition" resultType="TripDto">
		select *
		from attraction_info
		<where>		
		    <if test="contentTypeId != 0">
		        content_type_id = #{contentTypeId} 
		    </if>
		    <if test="contentTypeId != 0 and sidoCode != 0">
		        and sido_code = #{sidoCode} 
		    </if>
		    <if test="contentTypeId == 0 and sidoCode != 0">
		        sido_code = #{sidoCode} 
		    </if>
		    <if test="(contentTypeId != 0 or sidoCode != 0) and gugunCode != 0">
		        and gugun_code = #{gugunCode} 
		    </if>
		    <if test="(contentTypeId == 0 and sidoCode == 0) and gugunCode != 0">
		        gugun_code = #{gugunCode} 
		    </if>
		</where>
	</select>
	
	<select id = "searchTripDescription" parameterType = "string" resultMap = "tripDescriptionResultMap">
		select *
		from attraction_description
		where desc_id = #{contentId}
	</select>
	
	<select id = "getTrip" parameterType = "int" resultType="TripDto">
		select *
		from attraction_info
		where content_id = #{contentId}
	</select>
	<select id="getSido" resultType="SidoDto">
		select *
		from sido;
	</select>

	<select id="getGugun" parameterType="int" resultType="GugunDto">
		select *
		from gugun
		where sido_code = #{sidoCode}
	</select>

	<select id="getContentTypes">
		select *
		from content_type;
	</select>
</mapper>